
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for k0smotron.">
      
      
        <meta name="author" content="Mirantis, Inc.">
      
      
        <link rel="canonical" href="https://docs.k0smotron.io/head/capi-adoption/">
      
      
        <link rel="prev" href="../capi-examples/">
      
      
        <link rel="next" href="../capi-aws/">
      
      
      <link rel="icon" href="../img/k0s_social.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Adopting an existing k0s cluster into CAPI management - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XY3LK5RVBZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-XY3LK5RVBZ');
</script>

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adopting-an-existing-k0s-cluster-into-capi-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You are not currently viewing the documentation for the current stable release of k0smotron.
<a href="../..">
  <strong>Click here to go to the documentation of the current stable release.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL(".."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s_social.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Adopting an existing k0s cluster into CAPI management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k0sproject/k0smotron" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s_social.png" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k0sproject/k0smotron" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project status
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Standalone
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Standalone
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create a cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../join-nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Join a worker node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../etcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Etcd configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HA control planes with Kine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hcp-autoscaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autoscaling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cluster API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Cluster API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-controlplane/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Plane
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-controlplane-bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Plane Bootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Worker Node Bootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Machine Provider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingress-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingress support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ignition-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ignition support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-clusterclass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ClusterClass
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-machine-health-checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Health Checks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_10" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3_10" id="__nav_4_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_10">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software prerequisites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Adopting an existing k0s cluster into CAPI management
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Adopting an existing k0s cluster into CAPI management
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adopting-the-control-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Adopting the control plane
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adopting the control plane">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-prepare-control-plane-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Prepare control plane nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-collect-control-plane-node-information" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Collect control plane node information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-store-the-kubeconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Store the kubeconfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-import-pki-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Import PKI secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-create-the-core-capi-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Create the core CAPI objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-create-machine-objects-for-each-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Create Machine objects for each control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-create-remotemachine-objects-for-each-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Create RemoteMachine objects for each control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-label-existing-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 8: Label existing Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-unpause" class="md-nav__link">
    <span class="md-ellipsis">
      Step 9: Unpause
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-verify" class="md-nav__link">
    <span class="md-ellipsis">
      Step 10: Verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adopting-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Adopting worker nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adopting worker nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-collect-worker-node-information" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Collect worker node information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-machine-and-remotemachine-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Create Machine and RemoteMachine objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-label-existing-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Label existing worker Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-unpause" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Unpause
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Adding new worker nodes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-aws-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS (VMs)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-hetzner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hetzner Cloud (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-openstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenStack (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-kubevirt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KubeVirt (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-vsphere/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vSphere
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-remotemachine-teleport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Machine with Teleport
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-remotemachine-okta-asa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Machine with Okta ASA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-use-oci-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using OCI registry to pull k0s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-examples/cilium-kube-proxy-replacement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cilium with kube-proxy replacement (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_11" >
        
          
          <label class="md-nav__link" for="__nav_4_3_11" id="__nav_4_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_11">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capi-advanced/cloud-init/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud init customization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Update
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Update
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/update-standalone/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standalone
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/update-cluster-pod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster API (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/update-capi-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster API (VMs)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update/hcp-autopilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update workers (HCP)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../commercial-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commercial Support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/contribute-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/dev-environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/contribute-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/contribute-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/release-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release process
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../known-limitations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Limitations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_1" >
        
          
          <label class="md-nav__link" for="__nav_11_1" id="__nav_11_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Custom resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_1">
            <span class="md-nav__icon md-icon"></span>
            Custom resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource-reference/bootstrap.cluster.x-k8s.io-v1beta1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bootstrap.cluster.x-k8s.io/v1beta1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource-reference/controlplane.cluster.x-k8s.io-v1beta1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    controlplane.cluster.x-k8s.io/v1beta1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource-reference/infrastructure.cluster.x-k8s.io-v1beta1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    infrastructure.cluster.x-k8s.io/v1beta1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource-reference/k0smotron.io-v1beta1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    k0smotron.io/v1beta1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terminology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terminology
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adopting-the-control-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Adopting the control plane
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adopting the control plane">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-prepare-control-plane-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Prepare control plane nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-collect-control-plane-node-information" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Collect control plane node information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-store-the-kubeconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Store the kubeconfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-import-pki-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Import PKI secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-create-the-core-capi-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Create the core CAPI objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-create-machine-objects-for-each-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Create Machine objects for each control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-create-remotemachine-objects-for-each-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Create RemoteMachine objects for each control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-label-existing-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 8: Label existing Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-unpause" class="md-nav__link">
    <span class="md-ellipsis">
      Step 9: Unpause
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-verify" class="md-nav__link">
    <span class="md-ellipsis">
      Step 10: Verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adopting-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Adopting worker nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adopting worker nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-collect-worker-node-information" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Collect worker node information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-machine-and-remotemachine-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Create Machine and RemoteMachine objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-label-existing-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Label existing worker Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-unpause" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Unpause
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-worker-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Adding new worker nodes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="adopting-an-existing-k0s-cluster-into-capi-management">Adopting an existing k0s cluster into CAPI management<a class="headerlink" href="#adopting-an-existing-k0s-cluster-into-capi-management" title="Permanent link">#</a></h1>
<p>If you have a k0s cluster that was deployed manually — on VMs or bare-metal, outside of Cluster API — you can bring it under k0smotron management without rebuilding it or disrupting running workloads.</p>
<p>The adoption process works by creating CAPI resource objects that represent the existing cluster's current state. All objects are initially created in a <strong>paused</strong> state so that controllers do not attempt to reconcile them before the full picture is established. Once the state is consistent, you unpause and hand over control.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide covers adoption of k0s clusters over SSH using <strong>RemoteMachines</strong> (VMs or bare-metal). If you use another infrastructure provider, such as vSphere or AWS, the idea stands the same. Check the provider documentation for additional details.</p>
</div>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">#</a></h2>
<ul>
<li>A running k0s cluster with a reachable API server</li>
<li>A kubeconfig for the existing cluster with cluster-admin privileges</li>
<li>A management cluster with k0smotron and CAPI installed</li>
<li>SSH access to the existing control plane and worker nodes</li>
</ul>
<h2 id="adopting-the-control-plane">Adopting the control plane<a class="headerlink" href="#adopting-the-control-plane" title="Permanent link">#</a></h2>
<h3 id="step-1-prepare-control-plane-nodes">Step 1: Prepare control plane nodes<a class="headerlink" href="#step-1-prepare-control-plane-nodes" title="Permanent link">#</a></h3>
<p>Before creating CAPI objects, each control plane node must be reconfigured with two additional settings that k0smotron relies on:</p>
<ul>
<li><strong><code>--enable-dynamic-config</code></strong>: Allows k0smotron reconcile k0s config changes. See <a href="https://docs.k0sproject.io/stable/dynamic-configuration/">k0s config documentation</a> for details.</li>
<li><strong><code>AUTOPILOT_HOSTNAME</code></strong>: Required for Autopilot-based in-place upgrades to function. Must match the <code>Machine</code> object name you will assign to this node (e.g., <code>my-cluster-cp-0</code>). Autopilot uses this hostname to identify the node during upgrade operations.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you will use update strategies other than InPlace (e.g. Recreate), the <code>AUTOPILOT_HOSTNAME</code> is not strictly required. However, we recommend setting it anyway to keep future upgrade options open.
If you don't plan to change the control plane configuration after adoption, you can skip <code>--enable-dynamic-config</code> as well.</p>
</div>
<p>For each control plane node, SSH in and perform the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Read the current ExecStart flags from the existing unit file</span>
grep<span class="w"> </span>ExecStart<span class="w"> </span>/etc/systemd/system/k0scontroller.service
<span class="c1"># Example output:</span>
<span class="c1"># ExecStart=/usr/local/bin/k0s controller --token-file /etc/k0s/token --config /etc/k0s/k0s.yaml</span>

<span class="c1"># 2. Re-install the service with the same flags plus the new ones.</span>
<span class="c1">#    --force overwrites the existing unit file in place.</span>
<span class="c1">#    Replace &lt;existing-flags&gt; with the flags from the ExecStart line above,</span>
<span class="c1">#    and &lt;machine-name&gt; with this node&#39;s Machine object name (e.g. my-cluster-cp-0).</span>
k0s<span class="w"> </span>install<span class="w"> </span>controller<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--force<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;existing-flags&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--enable-dynamic-config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="w"> </span><span class="nv">AUTOPILOT_HOSTNAME</span><span class="o">=</span>&lt;machine-name&gt;

<span class="c1"># 3. Restart k0s</span>
k0s<span class="w"> </span>stop<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>k0s<span class="w"> </span>start
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Restarting the k0s service causes a brief API server interruption. For multi-node clusters, we recommend performing this one node at a time.</p>
</div>
<p>Repeat for all control plane nodes, using the Machine object names you plan to assign, e.g.: <code>my-cluster-cp-0</code>, <code>my-cluster-cp-1</code>, etc.</p>
<h3 id="step-2-collect-control-plane-node-information">Step 2: Collect control plane node information<a class="headerlink" href="#step-2-collect-control-plane-node-information" title="Permanent link">#</a></h3>
<p>You will need the following for each existing control plane node:</p>
<ul>
<li>IP address</li>
<li>SSH port (default: 22)</li>
<li>SSH user and private key</li>
</ul>
<p>Collect it from the existing cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>--selector<span class="w"> </span>node-role.kubernetes.io/control-plane<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>custom-columns<span class="o">=</span><span class="se">\</span>
NAME:.metadata.name,<span class="se">\</span>
INTERNAL_IP:.status.addresses<span class="o">[</span><span class="m">0</span><span class="o">]</span>.address
</code></pre></div>
<p>You will also need the pod and service CIDRs:</p>
<div class="highlight"><pre><span></span><code>k0s<span class="w"> </span>config<span class="w"> </span>create<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;podCIDR|serviceCIDR&#39;</span>
</code></pre></div>
<h3 id="step-3-store-the-kubeconfig">Step 3: Store the kubeconfig<a class="headerlink" href="#step-3-store-the-kubeconfig" title="Permanent link">#</a></h3>
<p>Create a Secret in the management cluster containing the existing cluster's kubeconfig. The Secret name <strong>must</strong> follow the CAPI convention: <code>{cluster-name}-kubeconfig</code>.</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>my-cluster-kubeconfig<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-file<span class="o">=</span><span class="nv">value</span><span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--type<span class="o">=</span>cluster.x-k8s.io/secret
</code></pre></div>
<p>Replace <code>my-cluster</code> with the name you will use for all CAPI objects in this guide.</p>
<h3 id="step-4-import-pki-secrets">Step 4: Import PKI secrets<a class="headerlink" href="#step-4-import-pki-secrets" title="Permanent link">#</a></h3>
<p>k0smotron looks for the cluster's PKI secrets at reconcile time and generates new CAs if they are absent. If new control plane nodes are ever added (via scaling or node replacement), they will be bootstrapped using whatever CA is stored in these secrets. Importing the existing PKI ensures new nodes receive the same CAs as the running cluster.</p>
<p>Copy the four PKI secrets from the first control plane node to the management cluster:</p>
<div class="highlight"><pre><span></span><code><span class="nv">CP_NODE</span><span class="o">=</span><span class="m">1</span>.2.3.4<span class="w">   </span><span class="c1"># IP of any existing control plane node</span>
<span class="nv">SSH_USER</span><span class="o">=</span>root

<span class="c1"># Kubernetes CA</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-cluster-ca<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cert<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/ca.crt<span class="o">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--key<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/ca.key<span class="o">)</span>

<span class="c1"># etcd CA</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-cluster-etcd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cert<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/etcd/ca.crt<span class="o">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--key<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/etcd/ca.key<span class="o">)</span>

<span class="c1"># Front proxy CA</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-cluster-proxy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cert<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/front-proxy-ca.crt<span class="o">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--key<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/front-proxy-ca.key<span class="o">)</span>

<span class="c1"># Service account signing keys</span>
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-cluster-sa<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cert<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/sa.pub<span class="o">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--key<span class="o">=</span>&lt;<span class="o">(</span>ssh<span class="w"> </span><span class="nv">$SSH_USER</span>@<span class="nv">$CP_NODE</span><span class="w"> </span>cat<span class="w"> </span>/var/lib/k0s/pki/sa.key<span class="o">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your cluster uses external etcd, skip the <code>my-cluster-etcd</code> secret and refer to your etcd provider's documentation for the appropriate CA configuration.</p>
</div>
<h3 id="step-5-create-the-core-capi-objects">Step 5: Create the core CAPI objects<a class="headerlink" href="#step-5-create-the-core-capi-objects" title="Permanent link">#</a></h3>
<p>Create the <code>Cluster</code>, <code>K0sControlPlane</code>, <code>RemoteCluster</code>, and <code>RemoteMachineTemplate</code> objects. All are annotated with <code>cluster.x-k8s.io/paused: "true"</code> so controllers do not act on them until you are ready.</p>
<p>The <code>RemoteMachineTemplate</code> is referenced by <code>K0sControlPlane.spec.machineTemplate</code> and defines the pool from which k0smotron draws machines when scaling or replacing control plane nodes. The existing nodes are represented by direct <code>Machine</code> and <code>RemoteMachine</code> objects (Steps 6–7), not by this pool.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterNetwork</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pods</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cidrBlocks</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.244.0.0/16</span><span class="w">       </span><span class="c1"># replace with your cluster&#39;s pod CIDR</span>
<span class="w">    </span><span class="nt">services</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cidrBlocks</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.96.0.0/12</span><span class="w">        </span><span class="c1"># replace with your cluster&#39;s service CIDR</span>
<span class="w">    </span><span class="nt">serviceDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.local</span>
<span class="w">  </span><span class="nt">controlPlaneEndpoint</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.2.3.4</span><span class="w">             </span><span class="c1"># replace with your control plane endpoint</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6443</span>
<span class="w">  </span><span class="nt">controlPlaneRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">controlplane.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">K0sControlPlane</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">infrastructureRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteCluster</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">controlplane.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">K0sControlPlane</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">                 </span><span class="c1"># number of existing control plane nodes</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.29.2+k0s.0</span><span class="w">     </span><span class="c1"># k0s version currently running on the cluster</span>
<span class="w">  </span><span class="nt">updateStrategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InPlace</span><span class="w">     </span><span class="c1"># uses k0s Autopilot for upgrades</span>
<span class="w">  </span><span class="nt">k0sConfigSpec</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">machineTemplate</span><span class="p">:</span>
<span class="w">    </span><span class="nt">infrastructureRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachineTemplate</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-template</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteCluster</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">controlPlaneEndpoint</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.2.3.4</span><span class="w">             </span><span class="c1"># same as Cluster.spec.controlPlaneEndpoint</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6443</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachineTemplate</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-template</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">pool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-pool</span>
</code></pre></div>
<p>To make machines available for future scaling or node replacement, add one or more <code>PooledRemoteMachine</code> objects referencing the same pool:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PooledRemoteMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-spare-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-pool</span>
<span class="w">  </span><span class="nt">machine</span><span class="p">:</span>
<span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.6.7.8</span><span class="w">          </span><span class="c1"># a pre-provisioned spare VM</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">    </span><span class="nt">sshKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-ssh-key</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You do not need spare machines available at adoption time. <code>PooledRemoteMachine</code> objects can be added at any point before you need k0smotron to scale or replace a control plane node.</p>
</div>
<p>Apply all objects:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>cluster.yaml
</code></pre></div>
<h3 id="step-6-create-machine-objects-for-each-control-plane-node">Step 6: Create Machine objects for each control plane node<a class="headerlink" href="#step-6-create-machine-objects-for-each-control-plane-node" title="Permanent link">#</a></h3>
<p>First, retrieve the <code>K0sControlPlane</code> UID — you will set it as the owner reference on each <code>Machine</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">KCP_UID</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>k0scontrolplane<span class="w"> </span>my-cluster<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.metadata.uid}&#39;</span><span class="k">)</span>
</code></pre></div>
<p>For each existing control plane node, create a <code>Machine</code> object.</p>
<p>Set <code>spec.providerID</code> to <code>remote-machine://&lt;IP&gt;:&lt;SSH_PORT&gt;</code>. k0smotron's <code>ProviderIDController</code> reads this value and writes it to the matching Node in the workload cluster, which is how CAPI links the <code>Machine</code> object to the Node.</p>
<p>If the control plane nodes also run workloads (you use k0s with <code>--enable-worker</code>), include the <code>k0smotron.io/control-plane-worker-enabled: "true"</code> label so that replacement nodes created during scaling or remediation are configured the same way.</p>
<p>Setting <code>spec.bootstrap.dataSecretName</code> to the kubeconfig Secret tells CAPI that this machine is already bootstrapped — no bootstrap data will be generated or pushed to the node.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Repeat this block for each control plane node, changing the name and providerID</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Machine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/cluster-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/control-plane</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/control-plane-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">    </span><span class="nt">k0smotron.io/control-plane-worker-enabled</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">  </span><span class="c1"># omit if CP nodes do not run workloads</span>
<span class="w">  </span><span class="nt">ownerReferences</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">controlplane.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">K0sControlPlane</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">    </span><span class="nt">uid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${KCP_UID}</span><span class="w">            </span><span class="c1"># substitute with the value from above</span>
<span class="w">    </span><span class="nt">controller</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">blockOwnerDeletion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.29.2</span><span class="w">            </span><span class="c1"># Kubernetes version (without k0s suffix)</span>
<span class="w">  </span><span class="nt">providerID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">remote-machine://1.2.3.4:22</span><span class="w">  </span><span class="c1"># format: remote-machine://&lt;IP&gt;:&lt;SSH_PORT&gt;</span>
<span class="w">  </span><span class="nt">bootstrap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dataSecretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-kubeconfig</span><span class="w">  </span><span class="c1"># marks machine as already bootstrapped</span>
<span class="w">  </span><span class="nt">infrastructureRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachine</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-0</span>
</code></pre></div>
<p>Apply with UID substitution:</p>
<div class="highlight"><pre><span></span><code><span class="nv">KCP_UID</span><span class="o">=</span><span class="nv">$KCP_UID</span><span class="w"> </span>envsubst<span class="w"> </span>&lt;<span class="w"> </span>machines.yaml<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Create one <code>Machine</code> per control plane node. Use a consistent naming scheme such as <code>{cluster-name}-cp-0</code>, <code>{cluster-name}-cp-1</code>, etc.</p>
</div>
<h3 id="step-7-create-remotemachine-objects-for-each-control-plane-node">Step 7: Create RemoteMachine objects for each control plane node<a class="headerlink" href="#step-7-create-remotemachine-objects-for-each-control-plane-node" title="Permanent link">#</a></h3>
<p>For each <code>Machine</code>, create a matching <code>RemoteMachine</code> with the node's SSH connection details. These are used by k0smotron for future lifecycle operations (upgrades, replacement).</p>
<p>Two annotations are required on each <code>RemoteMachine</code>. The <code>K0sControlPlane</code> controller uses them to verify that each machine was provisioned from the expected template — machines that fail this check are marked for deletion and replaced. Set them to the name and group kind of the <code>RemoteMachineTemplate</code> you created in Step 5:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Repeat for each control plane node</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/cloned-from-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-template</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/cloned-from-groupkind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachineTemplate.infrastructure.cluster.x-k8s.io</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/cluster-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/control-plane</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/control-plane-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.2.3.4</span><span class="w">            </span><span class="c1"># IP address of this control plane node</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">  </span><span class="nt">sshKeyRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-cp-ssh-key</span><span class="w">   </span><span class="c1"># Secret containing the SSH private key</span>
</code></pre></div>
<p>The SSH key Secret must have a key named <code>value</code> containing the private key:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>my-cluster-cp-ssh-key<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--from-file<span class="o">=</span><span class="nv">value</span><span class="o">=</span>./id_rsa<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>RemoteMachine</code> name must match the <code>infrastructureRef.name</code> in the corresponding <code>Machine</code> object.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The owner reference from <code>RemoteMachine</code> back to its <code>Machine</code> is set automatically by the Machine controller — no manual action needed.</p>
</div>
<h3 id="step-8-label-existing-nodes">Step 8: Label existing Nodes<a class="headerlink" href="#step-8-label-existing-nodes" title="Permanent link">#</a></h3>
<p>k0smotron's <code>ProviderIDController</code>writes <code>Machine.spec.providerID</code> to <code>Node.spec.providerID</code>, which is how CAPI links the Machine to its Node.</p>
<p>Label each existing Node in the <strong>workload cluster</strong> with the name of its corresponding <code>Machine</code> object:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run against the existing workload cluster</span>
kubectl<span class="w"> </span>--kubeconfig<span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span>label<span class="w"> </span>node<span class="w"> </span>&lt;cp-node-0-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>k0smotron.io/machine-name<span class="o">=</span>my-cluster-cp-0

kubectl<span class="w"> </span>--kubeconfig<span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span>label<span class="w"> </span>node<span class="w"> </span>&lt;cp-node-1-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>k0smotron.io/machine-name<span class="o">=</span>my-cluster-cp-1

kubectl<span class="w"> </span>--kubeconfig<span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span>label<span class="w"> </span>node<span class="w"> </span>&lt;cp-node-2-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>k0smotron.io/machine-name<span class="o">=</span>my-cluster-cp-2
</code></pre></div>
<p>Use <code>kubectl get nodes --kubeconfig=./my-cluster.kubeconfig</code> to list the actual Node names.</p>
<h3 id="step-9-unpause">Step 9: Unpause<a class="headerlink" href="#step-9-unpause" title="Permanent link">#</a></h3>
<p>Once all objects are created and you have verified the names, providerIDs, and addresses are correct, remove the paused annotation from all objects to hand over control to k0smotron.</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>kind<span class="w"> </span><span class="k">in</span><span class="w"> </span>cluster<span class="w"> </span>k0scontrolplane<span class="w"> </span>remotecluster<span class="w"> </span>machine<span class="w"> </span>remotemachine<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>kubectl<span class="w"> </span>annotate<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$kind</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--all<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>cluster.x-k8s.io/paused-
<span class="k">done</span>
</code></pre></div>
<p>k0smotron will now reconcile the objects against the existing cluster. Because the Machine <code>providerID</code> values match the existing Nodes, the controllers will recognize the nodes as already provisioned and will not attempt to re-install or modify them.</p>
<h3 id="step-10-verify">Step 10: Verify<a class="headerlink" href="#step-10-verify" title="Permanent link">#</a></h3>
<p>Check that all objects reach a ready state:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>cluster,k0scontrolplane,remotecluster,machine,remotemachine<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>wide
</code></pre></div>
<p>Expected output:</p>
<div class="highlight"><pre><span></span><code>NAME                              PHASE
cluster.../my-cluster             Provisioned

NAME                              READY   REPLICAS   READY REPLICAS
k0scontrolplane.../my-cluster     true    3          3

NAME                              READY
remotecluster.../my-cluster       true

NAME                              PHASE     NODE
machine.../my-cluster-cp-0        Running   cp-node-0
machine.../my-cluster-cp-1        Running   cp-node-1
machine.../my-cluster-cp-2        Running   cp-node-2

NAME                              READY
remotemachine.../my-cluster-cp-0  true
remotemachine.../my-cluster-cp-1  true
remotemachine.../my-cluster-cp-2  true
</code></pre></div>
<h2 id="adopting-worker-nodes">Adopting worker nodes<a class="headerlink" href="#adopting-worker-nodes" title="Permanent link">#</a></h2>
<p>Worker nodes can be adopted the same way as control plane nodes. The only differences are:</p>
<ul>
<li>No <code>cluster.x-k8s.io/control-plane</code> label on the <code>Machine</code></li>
<li>Workers are not owned by <code>K0sControlPlane</code> — they stand as individual <code>Machine</code> objects</li>
</ul>
<p>Worker adoption can be done alongside the control plane adoption or independently at any later point.</p>
<h3 id="step-1-collect-worker-node-information">Step 1: Collect worker node information<a class="headerlink" href="#step-1-collect-worker-node-information" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>--selector<span class="w"> </span><span class="s1">&#39;!node-role.kubernetes.io/control-plane&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>custom-columns<span class="o">=</span><span class="se">\</span>
NAME:.metadata.name,<span class="se">\</span>
PROVIDER_ID:.spec.providerID,<span class="se">\</span>
INTERNAL_IP:.status.addresses<span class="o">[</span><span class="m">0</span><span class="o">]</span>.address
</code></pre></div>
<h3 id="step-2-create-machine-and-remotemachine-objects">Step 2: Create Machine and RemoteMachine objects<a class="headerlink" href="#step-2-create-machine-and-remotemachine-objects" title="Permanent link">#</a></h3>
<p>Create a paused <code>Machine</code> and <code>RemoteMachine</code> for each worker node:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Repeat for each worker node, changing name, providerID and address</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Machine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-worker-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/cluster-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.29.2</span><span class="w">            </span><span class="c1"># Kubernetes version (without k0s suffix)</span>
<span class="w">  </span><span class="nt">providerID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">remote-machine://10.0.0.11:22</span><span class="w">  </span><span class="c1"># format: remote-machine://&lt;IP&gt;:&lt;SSH_PORT&gt;</span>
<span class="w">  </span><span class="nt">bootstrap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dataSecretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-kubeconfig</span><span class="w">  </span><span class="c1"># marks machine as already bootstrapped</span>
<span class="w">  </span><span class="nt">infrastructureRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachine</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-worker-0</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoteMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-worker-0</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster.x-k8s.io/paused</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.11</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">  </span><span class="nt">sshKeyRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-worker-ssh-key</span>
</code></pre></div>
<h3 id="step-3-label-existing-worker-nodes">Step 3: Label existing worker Nodes<a class="headerlink" href="#step-3-label-existing-worker-nodes" title="Permanent link">#</a></h3>
<p>Label each existing worker Node in the workload cluster with the name of its corresponding <code>Machine</code> object:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>--kubeconfig<span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span>label<span class="w"> </span>node<span class="w"> </span>&lt;worker-node-0-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>k0smotron.io/machine-name<span class="o">=</span>my-cluster-worker-0

kubectl<span class="w"> </span>--kubeconfig<span class="o">=</span>./my-cluster.kubeconfig<span class="w"> </span>label<span class="w"> </span>node<span class="w"> </span>&lt;worker-node-1-name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>k0smotron.io/machine-name<span class="o">=</span>my-cluster-worker-1
</code></pre></div>
<h3 id="step-4-unpause">Step 4: Unpause<a class="headerlink" href="#step-4-unpause" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>workers.yaml

kubectl<span class="w"> </span>annotate<span class="w"> </span>machine,remotemachine<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--selector<span class="o">=</span>cluster.x-k8s.io/cluster-name<span class="o">=</span>my-cluster<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="o">=</span>default<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>cluster.x-k8s.io/paused-
</code></pre></div>
<h3 id="adding-new-worker-nodes">Adding new worker nodes<a class="headerlink" href="#adding-new-worker-nodes" title="Permanent link">#</a></h3>
<p>For new workers going forward, use a <code>MachineDeployment</code> backed by a <code>PooledRemoteMachine</code> pool. This gives you declarative scaling and rolling updates. See the <a href="../capi-remote/">remote machine guide</a> for the full setup.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 k0sproject a Series of LF Projects, LLC. For website terms of use, trademark policy and other project policies please see lfprojects.org/policies/. - All rights reserved.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k0sproject/k0smotron" target="_blank" rel="noopener" title="k0smotron on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://k0smotron.io/" target="_blank" rel="noopener" title="k0smotron Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2C505.9 32 576 102 576 188.5c0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1C429.8 399.5 390 416 348.5 416 262.1 416 192 346 192 259.5c0-1.5 0-3 .1-4.5.5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9v2.6c0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zm-144.3 77.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1l-71.1 71.1C73.8 275.5 64 299.1 64 323.6c0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2C70.1 480.2 0 410.2 0 323.7c0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9v3.9c-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8v-2.3c0-33.7-18-63.3-44.8-79.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.autohide", "search.suggest", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>